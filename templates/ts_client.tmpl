// AUTO-GENERATED by protoc-gen-webviewrpc
// TypeScript Client: {{.ServiceName}}Client

// Import encoding/decoding functions for each method
import { {{range .Methods}}encode{{.InputType}}, decode{{.OutputType}},{{end}} } from './{{.ServiceName}}.js';

// Type definitions for request/response messages
{{range .Methods}}
export interface {{.InputType}} {
  [key: string]: any;
}

export interface {{.OutputType}} {
  [key: string]: any;
}
{{end}}

/**
 * RPC Client interface (from app-webview-rpc)
 */
interface WebViewRpcClient {
  callMethod(methodName: string, reqBytes: Uint8Array): Promise<Uint8Array>;
}

/**
 * {{.ServiceName}} RPC Client
 * Provides type-safe methods to call {{.ServiceName}} on the server
 */
export class {{.ServiceName}}Client {
  private rpcClient: WebViewRpcClient;

  constructor(rpcClient: WebViewRpcClient) {
    this.rpcClient = rpcClient;
  }

  {{range .Methods}}
  /**
   * Call {{.MethodName}} method
   * @param requestObj - {{.InputType}} object
   * @returns Promise resolving to {{.OutputType}}
   */
  async {{.MethodName}}(requestObj: {{.InputType}}): Promise<{{.OutputType}}> {
    // Encode request object to bytes
    const reqBytes = encode{{.InputType}}(requestObj);
    
    // Call remote method
    const respBytes = await this.rpcClient.callMethod("{{$.ServiceName}}.{{.MethodName}}", reqBytes);
    
    // Decode response bytes to object
    const respObj = decode{{.OutputType}}(respBytes);
    return respObj;
  }
  {{end}}
}

