// AUTO-GENERATED by protoc-gen-webviewrpc
// JavaScript Client: {{.ServiceName}}Client

// Import encoding/decoding functions for each method
import { {{range .Methods}}encode{{.InputType}}, decode{{.OutputType}},{{end}} } from './{{.ServiceName}}.js';

export class {{.ServiceName}}Client {
  /**
   * @param {WebViewRpcClient} rpcClient
   */
  constructor(rpcClient) {
    this.rpcClient = rpcClient;
  }

  {{range .Methods}}
  /**
   * async {{.MethodName}}
   * @param { {{.InputType}} } requestObj
   * @returns {Promise< {{.OutputType}} >}
   */
  async {{.MethodName}}(requestObj) {
    // 1) encode requestObj => Uint8Array
    const reqBytes = encode{{.InputType}}(requestObj);
    // 2) callMethod => Promise<Uint8Array>
    const respBytes = await this.rpcClient.callMethod("{{$.ServiceName}}.{{.MethodName}}", reqBytes);
    // 3) decode => responseObj
    const respObj = decode{{.OutputType}}(respBytes);
    return respObj;
  }
  {{end}}
}
